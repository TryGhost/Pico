{{!< default}}

{{#post}}

<article class="gh-article {{post_class}}">

    <header class="gh-header gh-canvas">
        <div class="pico-pagehead">
            {{#if @site.logo}}
            <img src="{{@site.logo}}" alt="{{@site.title}}" />
            {{/if}}
            <div class="pico-pagehead-content">
                <p><strong>{{@site.title}}</strong> &bull; {{@site.description}}</p>
                <div class="pico-pagehead-cta">
                    {{#if @member.paid}}
                        <a class="gh-button" href="/signup/">My account</a>
                    {{else if @member}}
                        <a class="gh-button" href="/signup/">Upgrade now</a>
                    {{else}}
                        <a class="gh-button" href="/signup/">Subscribe now</a>
                    {{/if}}
                </div>
            </div>
        </div>
        <span class="gh-post-meta"><time datetime="{{date format="YYYY-MM-DD"}}">{{date format="D MMM YYYY"}}</time> <span class="bull">&bull;</span> {{reading_time}}</span>
        <h1 class="gh-title">{{title}}</h1>

        {{#if custom_excerpt}}
        <p class="gh-excerpt">{{custom_excerpt}}</p>
        {{/if}}

        {{#if feature_image}}
            {{!-- This is a responsive image, it loads different sizes depending on device
            https://medium.freecodecamp.org/a-guide-to-responsive-images-with-ready-to-use-templates-c400bd65c433 --}}
            <img class="gh-feature-image"
                srcset="{{img_url feature_image size="s"}} 300w,
                        {{img_url feature_image size="m"}} 600w,
                        {{img_url feature_image size="l"}} 1000w,
                        {{img_url feature_image size="xl"}} 2000w"
                sizes="(max-width: 800px) 400px,
                    (max-width: 1170px) 1170px,
                        2000px"
                src="{{img_url feature_image size="xl"}}"
                alt="{{title}}"
            />
        {{/if}}
    </header>

    <section class="gh-content gh-canvas">

        {{#if access}}

            {{!-- if the user has access to this post, show it to them --}}
            {{content}}

        {{else}}

            {{!-- if the user does not have access, show them an upgrade CTA --}}
            <p>You don't have access to this post on <strong>{{@site.title}}</strong> at the moment, but if you upgrade your account you'll be able to see the whole thing, as well as all the other posts in the archive! Subscribing only takes a few seconds and will give you immediate access.</p>
            <aside class="gh-upgrade-cta">
                {{#if @member}}
                    <h2>This post is for paying subscribers only</h2>
                {{else}}
                    <h2>This post is for subscribers only</h2>
                {{/if}}
                <a class="gh-button gh-button-large gh-button-primary" href="/signup/">Subscribe now</a>
                <p><small>Already have an account? <a href="/signin/">Sign in</a></small></p>
            </aside>

        {{/if}}

    </section>

    <footer class="gh-footer gh-canvas">

        <p class="gh-post-authors">
            Written by {{#foreach authors}}<a href="{{url}}">{{name}}</a> {{/foreach}} in {{tags}}
        </p>

        {{!--
        <section class="gh-post-comments">
            If you want to embed comments, this is a good place to do it!
        </section>
        --}}

    </footer>

</article>

<aside class="gh-readmore">
    <div class="gh-readmore-inner">
        <div class="gh-readmore-next">
            {{#next_post}}<a href="{{url}}">{{> "icons/arrow-left"}} <h4>{{title}}</h4></a>{{/next_post}}
        </div>
        <div class="gh-readmore-prev">
            {{#prev_post}}<a href="{{url}}">
                <h4>{{title}}</h4> {{> "icons/arrow-right"}}
            </a>{{/prev_post}}
        </div>
    </div>
</aside>

{{/post}}

